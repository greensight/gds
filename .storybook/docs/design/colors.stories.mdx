import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Design / Colors" />

# Colors

## Составление палитр

Между отделами Frontend и UX заключено ~~перемирие~~ соглашение, которое упрощает жизнь и делает осознанным выбор цвета на проекте. Дизайнеры получают рабочую систему подбора палитр, а фронтендеры — менее «50-ти оттенков серого». Вместе мы ускоряем рабочий процесс и поддерживаем порядок в проекте.

В большинстве проектов за последние годы клиенты приходят к нам со своими цветами в логотипе или брендбуке. Наша задача: не трогать основные цвета и построить палитру оттенков.

Предлагаемые в этом гайде варианты — не панацея. Вы можете построить палитру по своему усмотрению, только проследите, чтобы главные цвета от клиента остались неизменными.

### Цветовая модель HSL (HSLA)

**HSL** — цветовая модель, в основе которой лежат три параметра: **Hue** (оттенок), **Saturation** (Насыщенность) и **Lightness** (Светлота).

Частный случай HSL — включение в палитру четвертого параметра: альфа-канала для прозрачности. В этом случае правильней называть систему **HSLA**. Мы строим палитру в HSL, а HSLA используем, только когда необходима прозрачность для цвета.

<img src="images/colors/figma-hsl.png" alt="Панель выбора цвета в Figma в формате HSL" width="250" />

_Панель выбора цвета в Figma в формате HSL_

### Автоматизированный процесс построения палитры

Инструмент [ColorBox](https://www.colorbox.io/) от Lyft Design - гибкий и интуитивно понятный инструмент для создания цветовых палитр с автоматической проверкой цветового контраста.

<img src="images/colors/ColorBox.jpg" alt="Интерфейс ColorBox" />

_Интерфейс ColorBox_

Для примера мы возьмем синий цвет и будем строить для него палитру:

**HEX**: #005BAD

**HSL**: 208, 100, 34

<img src="images/colors/basic-color.png" alt="Начальный цвет" width="200" />

_Начальный цвет_

Определимся с количеством шагов и выставим нужное нам: 10 будет достаточно.

<img src="images/colors/major-steps.png" alt="Параметр Major steps" width="300" />

_Параметр Major steps_

В настройках Hue прописывается оттенок. По модели HSL параметр нашего оттенка 208. Ставим эти значения на Start и End для создания палитры в нашем оттенке.

Можно задать диапазон для изменения оттенка в соседние цвета на протяжении палитры. Это сделает палитру неравномерной по цвету, но может подтолкнуть к интересной идее.

<img src="images/colors/hue.png" alt="Параметр Hue" width="300" />

_Параметр Hue_

Saturation регулирует насыщенность в палитре.

<img src="images/colors/saturation.png" alt="Параметр Saturation" width="300" />

_Параметр Saturation_

Brightness устанавливает яркость палитры.

<img src="images/colors/brightness.png" alt="Параметр Brightness" width="300" />

_Параметр Brightness_

Не забудьте зафиксировать цвет, который дал клиент. Эта настройка находится внизу и делает обязательным наличие исходного цвета в палитре.

<img src="images/colors/lock-color.png" alt="Параметр Lock Color" width="300" />

_Параметр Lock Color_

На выходе получаем палитру с 10 цветами. На каждом цвете обозначен контраст для черного и белого текста и дан hex-код. Начальный цвет сохранен в палитре и остался неизменным.

<img src="images/colors/palette.png" alt="Итоговая палитра из ColorBox" width="250" />

_Итоговая палитра из ColorBox_

### Как самостоятельно построить палитру основных цветов

Рассмотрим «ручной» метод в качестве альтернативы.

Возьмём всё тот же синий цвет в качестве базового (208, 100, 34) и построим палитру из 10 цветов. Будем использовать для этого плагин **Color Designer** для Figma.

Параметр **L** у нашего цвета равен 34 из 100. Значит в палитре по светлости он будет третьим. Нужно сделать 7 цветов в сторону светлых оттенков и 2 в сторону темных.

Подберём светлые оттенки.

<img src="images/colors/color-designer-tints.png" alt="Подбор светлых оттенков через Color Designer" width="600" />

_Подбор светлых оттенков через Color Designer_

Последний цвет в палитре плагина всегда белый. Мы его не берем, нам нужны предыдущие семь. Их мы переносим в
подготовленные прямоугольники.

<img src="images/colors/palette-tints.png" alt="Палитра светлых оттенков" width="250" />

_Палитра светлых оттенков_

И теперь аналогично тёмные оттенки.

<img src="images/colors/color-designer-shades.png" alt="Подбор тёмных оттенков через Color Designer" width="600" />

_Подбор тёмных оттенков через Color Designer_

Последний цвет в этом случае всегда чёрный - его мы тоже не берем. Остальные переносим.

<img src="images/colors/palette-shades.png" alt="Палитра тёмных оттенков" width="250" />

_Палитра тёмных оттенков_

Наконец, скорректируем оттенки по насыщенности — этим управляет параметр **S**.

**Простое правило:** чем темнее цвет, тем больше насыщенность и наоборот. Не забывайте про глаз - его не заменит набор правил.

После корректировки получаем цветовую палитру из 10 оттенков. При этом главное условие выполнено: цвет, который пришел
от клиента, остался неизменным.

<img src="images/colors/palette-final.png" alt="Итоговая палитра через Color Designer" width="250" />

_Итоговая палитра через Color Designer_

### Проверка цветового контраста

♿️ Нам важно соблюсти минимальные требования по цветовому контрасту, диктуемые [спецификацией WCAG (Level AA)](https://www.w3.org/TR/WCAG21/#contrast-minimum): **коэффициент 4.5 для обычного текста и 3 для крупного** (обычное начертание >= 18px или жирное >= 14px).

Контраст проверяет дизайнер в процессе подбора палитр и фронтенд-разработчик в процессе реализации. Общей рекомендацией является проверка дизайнером основных цветовых пар и автоматизированная проверка результата на фронтенде.

Для дизайнера:

- **ColorBox** выводит значения контраста для чёрного и белого текста на всех цветах сгенерированной палитры.
- Плагин **А11y Color Contrast Checker** для проверки нужных пар на уровне Figma. Он применяется к фрейму и проверяет все тексты на нем.
- Множество онлайн-инструментов. Например, [WebAIM: Contrast Checker](https://webaim.org/resources/contrastchecker/) или [Color Contrast Checker](https://marijohannessen.github.io/color-contrast-checker/).

Для разработчика:

- [Storybook A11y Addon](https://www.npmjs.com/package/@storybook/addon-a11y) - встраивается в качестве панели в Storybook. Изнутри использует **aXe**. Используется на этапе проектирования статических компонентов.
- [aXe Chrome Extension](https://chrome.google.com/webstore/detail/axe-web-accessibility-tes/lhdoppojpmngadmnindnejefpokejbdd) - встраивает aXe в качестве браузерного расширения. Используется на этапе финальной проверки страниц.

<img src="images/colors/contrast.png" alt="Фреймы для проверки контраста через А11y Color Contrast Checker" />

_Фреймы для проверки контраста через А11y Color Contrast Checker_

ЗАКОНЧИЛ ЗДЕСЬ!!!
## Система токенов

За автоматический перенос цветов в Сторибук отвечают фреймы *Palettes* и *Colors.* Предложенное решение масштабируется под любое количество цветов, но их необходимость в проекте должна быть обоснована.

*Palettes* хранит палитры, во фрейме *Colors* дизайнер присваивает цветам переменные и разбивает их по функциям. Каждый цвет имеет одну или несколько функций. Значения цветов переменных подбираются из фрейма *Palettes.*

Дизайнер не меняет структуру слоев и подход к именованию слоев во фреймах.

Дизайнер не меняет имена переменных после экспорта цветов в Сторибук.

⚠️ Сейчас нет возможности применить токенизацию для градиентов, так что они указываются **на отдельном фрейме**, и переносятся фронтендером вручную.

### Структура слоев *Palettes*

![Структура фрейма Palletes](images/colors/structure-palettes.png)

Вложенные фреймы *Blue* и *Red* содержат палитры основных цветов проекта. В ГДС эти цвета использованы для примера.

Мы можем добавить до 10 оттенков каждого цвета. Они именуются по названию оттенка, который в себе содержат.

Во фрейме *Grey* лежит палитра оттенков серого. Она изначально содержит 15 оттенков, чтобы захватить самые светлые участки.

Каждый цвет в палитре должен быть пронумерован. Нумерация всегда начинается с нуля.

### Структура слоев *Colors*

![Структура фрейма Colors](images/colors/structure-colors.png)

Внутри может быть любое разумное количество цветов. Дизайнер предполагает, где в проекте используется цвет, добавляет фрейм и дает название переменной.

Название переменной пишется текстом на цвете. В слоях ничего не переименовывается.

Цвета группируются визуально по принципу «Нейтральные» и «Функциональные»:

![Нейтральные цвета](images/colors/neutrals.png)

![Остальные цвета](images/colors/others.png)

Чтобы лучше понимать, где цвет используется, внизу есть описание. Заполнять его не обязательно.

#### Функциональные цвета

В системе используется минимум один функциональный цвет — красный. Остальные  добавляется, если необходимо. Глобально эти цвета всегда красный, желтый и зеленый, но могут отличаться по яркости или насыщенности.

![Цвета функций](images/colors/functions.png)

Если в палитре присутствует оттенок из этих трех цветов, функциональный цвет лучше подобрать из палитры.

Также в функциональные заносятся другие цвета, которые мы не подбираем по палитре. Это цвета бренда, ссылок, кнопок, шильдиков, статусов и другие оттенки, которые не попадают в нейтральные.

![Цвета тегов](images/colors/tags.png)

### Нейминг

Задача дизайнера не только подобрать цвета, но и присвоить им переменные*.* Это делается во фрейме Colors.

Для проекта нам требуется минимальные функциональные переменные — они уже прописаны в ГДС. Остальные переменные используют формат [lowerCamelCase](https://ru.wikipedia.org/wiki/CamelCase).

Мы не используем транслитерацию — все слова пишутся на английском.

Первое слово переменной начинается со строчной, каждое последующее — с прописной. Несколько слов пишутся слитно без пробела, дефиса или нижнего подчеркивания.

Идеальные имена функциональных переменных не содержат привязки к семантике и не используют в обозначениях названия цветов.

⛔️ h2Grey
⛔️ paragraphBlue70
⛔️ Black_button

✅ titlePromo
✅ link
✅ dark

В нейтральных переменных в нейминге нужно придерживаться градации тонов:

- grey0
- grey10
- grey20
- …
- grey80
- grey90

Системные цвета Black и White заносятся в нейтральные оттенки и не участвуют в палитрах.

Система нейминга совершенствуется, мы открыты для предложений.

### Начальный состав переменных

#### Нейтральные

`black` — черный

`grey0` — основной текст

`grey20` — второстепенныый текст

`grey40` — заблокированный текст

`grey60` — рамки

`grey70` —  рамки

`grey90` — фон

`white` — фон

`fade` — Подложка для попапов

#### Функции

`brand` — цвет бренда и ссылок

`brandHover` — цвет бренда и ссылок при наведении

`brandSecond` — дополнительный цвет бренда

`brandSecondHover` — дополнительный цвет бренда при наведении

`error` — ошибки

`warning` —  предупреждения

`success` — успешные действия

`tagHit` — цвет шильдика «Популярное»

`tagSale` — цвет шильдика «Распродажа»

`tagNew` — цвет шильдика «Новинка»

### Стили Фигмы

Переменные заносятся в стили Фигмы, по желанию можно разделить цвета на группы.

![Стили цветов в Figma](images/colors/figma-styles.png)
