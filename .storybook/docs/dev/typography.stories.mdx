import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Dev / Typography" />

# Typography

## Синхронизация с Figma

Дизайнер определяет стили типографики в Figma на фрейме `Typography` и применяет их на проекте. Стили разделены на `desktop` и `mobile`, при этом mobile может отсутствовать. Также он определяет значения брейкпоинтов для desktop и mobile.

Фрейм соблюдает строгую структуру, что позволяет получить дизайн-токены типографики. Из каждого стиля забираются правила для:

1. **fontFamily**
1. **fontWeight** - в численном формате (400, 700)
1. **fontSize** - конвертируется в rem для скейлинга в зависимости от дефолтного значения в браузере пользователя
1. **lineHeight** - конвертируется в модификаторы для зависимости от font-size и следовательно от rem (1.5)
1. **letterSpacing** - конвертируется в em (0.05em)
1. **fontStyle** - "italic"
1. **textTransform** - "uppercase", "lowercase", "capitalize"
1. **textDecoration** - "underline", "line-through"
1. **fontVariantNumeric** - OpenType атрибут для вывода равноширинных цифр ("tabular-nums")

Так это выглядит в Figma:

![Параметры стиля Figma](images/typography/style-properties.png)

Так это выглядит на деве после синхронизации:

```json
"typography": {
    "breakpoints": [1440, 767],
    "body": {
        "desktop": {
            "fontFamily": "PT Root UI",
            "fontWeight": 400,
            "fontSize": "1rem",
            "lineHeight": 1.4
        },
        "mobile": {
            "fontFamily": "PT Root UI",
            "fontWeight": 400,
            "fontSize": "0.875rem",
            "lineHeight": 1.4
        },
    }
}
```

☝🏿 Заметьте, что поля с дефолтными значениями не тянутся.

## Fluid Typography

Для стилей, имеющих "mobile"-версию применяется плавный скейлинг размера шрифта между точками "fluid typography with locks":

![Формула fluid typography](images/typography/fluid-typography.png)

**Суть:** мы орудуем 4-мя переменными: 2 брейкпоинта и 2 соответствующих им размера шрифта. На разрешениях, меньших минимального брейкпоинта применяется меньший кегль, на разрешениях, больших максимального брейкпоинта - больший. На разрешениях между ними идёт плавный переход между двумя значениями, расчитываемый по приведённой формуле.

Значение в больших скобках - это коэффициент. Когда он равен 0 (current vw = minimum vw), размер приравнивается к минимальному, когда он равен 1 (current vw = maximum vw) - к максимальному. Промежуточные значения получаются указанием в current vw значения в 100vw. В minimum vw при этом указывается размер шрифта в rem, чтобы происходил скейлинг от величины дефолтного шрифта в браузере пользователя.

## Как этим пользоваться

После синхронизации токенов структура данных становится доступна в объекте темы. Можно обращаться к ним напрямую. Но для большего удобства предоставляется хелпер `typography`, который позволяет автоматически применить выбранные стили, включая флюидную типографику.

Чтобы пользоваться хелпером на проекте, необходимо привязать к нему свой объект темы. Для этого создаёте свой скрипт typography, который в дальнейшем будете вызывать вместо прямого вызова хелпера из пакета GDS:

```js
import { typography as gdsTypography } from '@greensight/gds';
import theme from './theme';

const typography = name => gdsTypography(name, theme);

export default typography;
```

Далее общий процесс такой:

Нужно задать стили типографики для некоторого текста. В макете у этого текста указан стиль:

![Стиль Figma](images/typography/style.png)

Вы знаете имя стиля и можете передать его в хелпер `typography`:

```js
import typography from '../../scripts/typography';

const SomeComponent = () => {
    return <div css={{ ...typography('subheading') }}>Text</div>;
};
```
