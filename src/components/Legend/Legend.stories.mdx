import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';
import { text, radios, boolean, object } from '@storybook/addon-knobs';
import centeredDecorator from '../../../.storybook/decorators/centeredDecorator';
import Legend from '.';
import baseTheme from '../../utils/baseTheme';
import {
    LegendTheme,
    LegendSizeProperties,
    LegendStates,
    LegendThemeProperties,
    LegendStateProperties,
    LegendOptionalThemeProperties,
    LegendMarkThemeProperties,
    LegendProps,
} from '../../../.storybook/docgen/Legend';

<Meta title="Components / Legend" component={Legend} decorators={[centeredDecorator]} />

# Legend

<Story name="Knobs">
    <Legend
        as={text('Tag', 'legend')}
        name="Example"
        hint={boolean('Hint', true) ? text('Hint text', 'Hint') : undefined}
        hiddenLegend={boolean('Hidden legend', false)}
        size={radios('size', ['lg', 'md', 'sm'], 'md')}
        optional={boolean('Is optional?', true) ? text('Optional text', '(optional)') : undefined}
        IconBefore={boolean('Icon before', true) && baseTheme.global.placeholder}
        IconAfter={boolean('Icon after', true) && baseTheme.global.placeholder}
        block={boolean('Block', false)}
        horizontalAlignment={radios('Horizontal align', ['left', 'center', 'right'], 'left')}
        __theme={boolean('Use custom theme', false) ? object('themeObj', baseTheme.components.Legend) : undefined}
        __hintTheme={
            boolean('Use custom hint theme', false) ? object('hintThemeObj', baseTheme.components.FormHint) : undefined
        }
    >
        Legend
    </Legend>
</Story>

Легенда определяются полем `legend` в объекте темы. В целом концепт таков, что настройки диктуются сочетанием темы со стилистическими настройками из `theme` и размера из `sizes`.

После определения темы и размера для легенды становятся доступны вариации, задаваемые через props: `block`, `disabled`, `hidden` и т.д. Т.е. эти вариации доступны для **любой** легенды. Детальнее доступные props разобраны в разделе `Use cases`.

По умолчанию компонент рендерится через элемент `<label />` и наследует его пропсы. Вы можете изменить элемент через проп `as`, что позволит использовать компонент для легенд, и предоставит возможность использовать пропсы переданного компонента.

## Props

<Props of={LegendProps} />

## Theme

<Props
    components={{
        LegendTheme,
        LegendStates,
        LegendThemeProperties,
        LegendStateProperties,
        LegendSizeProperties,
        LegendOptionalThemeProperties,
        LegendMarkThemeProperties,
    }}
/>

## Use cases

### Basic

Легенда без параметров рендерится как тег `label` размером "md".

<Preview>
    <Story name="Basic">
        <Legend name="basic">Legend</Legend>
    </Story>
</Preview>

### Sizes

Размеры для легенды определяются в объекте темы в поле `legend.sizes`. Присвоенные имена становятся доступны через проп `size`.

**Рекомендуемые имена:** 'lg', 'md', 'sm'.

<Preview>
    <Story name="Large size">
        <Legend name="size-lg" size="lg">
            Legend
        </Legend>
    </Story>
    <Story id="components-legend--basic" />
    <Story name="Small size">
        <Legend name="size-sm" size="sm">
            Legend
        </Legend>
    </Story>
</Preview>

### Hint

Подсказка для легенды рендерится с помощью внутреннего компонента `FormHint`. Проп `size` `FormHint` получает у легенды.

<Preview>
    <Story name="Hint">
        <Legend name="hint" hint="Hint">
            Пример лейбла/легенды
        </Legend>
    </Story>
</Preview>

### Icons

Иконки слева от текста добавляются через проп `IconBefore`. Иконки справа от текста - через проп `IconAfter`. Иконки слева от текста добавляются через проп `IconBefore`. Иконка идёт с отступом, определённым через `iconOffset` в настройках `sizes`.

<Preview>
    <Story name="Icon (before)">
        <Legend name="icon-before" IconBefore={baseTheme.global.placeholder}>
            Legend
        </Legend>
    </Story>
    <Story name="Icon (after)">
        <Legend name="icon-after" IconAfter={baseTheme.global.placeholder}>
            Legend
        </Legend>
    </Story>
    <Story name="Icon (both)">
        <Legend name="icon-both" IconBefore={baseTheme.global.placeholder} IconAfter={baseTheme.global.placeholder}>
            Legend
        </Legend>
    </Story>
</Preview>

### Block

По умолчанию ширина текста легенды определяется контентом. Проп `block` ставит размеры по ширине родителя. Проп `block` имеет смысл использовать для легенды с иконками, если иконки нужно прижать к краям родительского блока.

<Preview>
    <Story name="Block">
        <Legend name="block" block>
            Legend
        </Legend>
    </Story>
    <Story name="Block (icons)">
        <Legend
            name="block-cons"
            block
            IconBefore={baseTheme.global.placeholder}
            IconAfter={baseTheme.global.placeholder}
        >
            Legend
        </Legend>
    </Story>
</Preview>

### Horizontal Alignment

По умолчанию текст легенды и иконки прижаты к левому краю. С помощью пропа `horizontalAlignment` можно прижать к правому или выровнять по центру.

<Preview>
    <Story id="components-legend--basic" />
    <Story name="Align to center">
        <Legend name="center" horizontalAlignment="center">
            Legend
        </Legend>
    </Story>
    <Story name="Align to right">
        <Legend name="right" horizontalAlignment="right">
            Legend
        </Legend>
    </Story>
</Preview>

### Hidden mode

♿️ Для визуально скрытой легенды текст и подсказка будут визуально скрыты, при этом они будут доступны для AT.

<Preview>
    <Story name="Hidden mode">
        <Legend name="hidden" hiddenLegend={true}>
            Legend
        </Legend>
    </Story>
</Preview>

### Optional text

Опциональный текст, указывающий на необязательность поля, к которому относится легенда.

<Preview>
    <Story name="Optional">
        <Legend name="optional" optional="(optional)">
            Пример лейбла/легенды
        </Legend>
    </Story>
</Preview>
